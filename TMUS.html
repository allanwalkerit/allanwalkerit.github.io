
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="TMUS">
<meta name="author" content="Allan Walker">
<title>TMUS POC</title>

<!-- CSS -->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.min.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.css' rel='stylesheet' />
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.0/mapbox-gl-geocoder.css' type='text/css' />

<!-- Script Libraries -->

<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.js'></script>
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.0/mapbox-gl-geocoder.min.js'></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>

<style>

body {
background-color: #000000 !important;
background-repeat:no-repeat;
background-repeat: no-repeat;
background-position: center center;
background-attachment: fixed;
background-size: cover;
}

.navbar {
background-color: #E20074 !important;
border-radius: 0px !important;
border-color: #E20074 !important;
height: 50px !important;
}


.navbar-brand {
  padding: 10px; /* firefox bug fix */
}
.navbar-brand>img {
   max-height: 100%;
   height: 100%;
   width: auto;
   margin: 0 auto;
}

.navbar-brand {
    position: absolute;
    left: 50%;
    margin-left: -50px !important;  /* 50% of your logo width */
    display: block;
}

.navbar navbar-default {
background-color: #E20074 !important;
border-radius: 0px !important;
border-color: #E20074 !important;
height: 50px !important;
}

#nav {
background-color: #E20074 !important;
border-radius: 0px !important;
border-color: #E20074 !important;
height: 50px !important;
}

#Navbar {
background-color: #E20074 !important;
border-radius: 0px !important;
border-color: #E20074 !important;
height: 50px !important;
}

.navbar-nav li a {
    line-height: 50px;
    height: 50px;
    padding-top: 0;
}


/* unvisited link */
a:link {
color: #F3F3F5;
text-decoration: none;
}

/* visited link */
a:visited {
color: #F3F3F5;
text-decoration: none;
}

/* mouse over link */
a:hover {
color: #F3F3F5;
text-decoration: none;
}

/* selected link */
a:active {
color: #F3F3F5;
text-decoration: none;
}


#map { 
width: 100vw;
height: 85vh;
margin: 0 auto;
}


span.highlight {
    background-color: #6A6A6A;
}



.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: rgba(255, 255, 255, 0.8) ;
    overflow-x: hidden;
    transition: 0.5s;
}

.sidenav {
    list-style-type: none;
    text-decoration: none;
    transition: 0.3s;
}

.sidenav a:hover, .offcanvas a:focus{
    color: #f1f1f1;
}

.sidenav .closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 36px;
    margin-left: 50px;
}

.openNav {
line-height: 50px;
height: 50px;
padding-top: 0;
color: #F3F3F5 !important;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}

.mapboxgl-popup-content {
background-color: #E20074 !important;
}

.mapboxgl-popup-close-button {
color: #FFFFFF !important;
}

.tick text {
    fill: white
}

.tick line{
  visibility:hidden;
}

</style>
</head>

<body onload="openthemap()">
<nav id="Top" class="navbar navbar-default">
<div id="nav" class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" title="T-Mobile"><img src="TMUS.png"></a>
    </div>
<ul class="nav navbar-nav">
<span id="hamburgerhell" class="openNav" style="font-size:25px;cursor:pointer" onclick="openNav()">&#9776;</span>
</ul>
    </div>
</nav>



<div id="market">

<div id="mySidenav" class="sidenav">
<nav id="Top" class="navbar navbar-default">
<div id="nav" class="container-fluid"><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a></div>
</nav>
</div>


<div class="row">
<div class="col-md-12">
<div id='map'></div>
</div>


</body>

<script>

function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
}

function openthemap() {

$('#hamburgerhell').show();

mapboxgl.accessToken = 'pk.eyJ1IjoiYWxsYW53YWxrZXJpdCIsImEiOiJZT3NlYnRFIn0.8-oyZEa83PvOolKOStdCbg';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/allanwalkerit/cj5u3mz0s57k12rpakf0xopr3?fresh=true',
    center: [-122.390550,37.788542],
    zoom: 12.5,
    pitch: 60,
    bearing: 0
});

var nav = new mapboxgl.NavigationControl();
map.addControl(nav, 'top-left');

map.addControl(new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
}));

map.on('click', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['TMUS Cells Extruded','TMUS Hexes Polys','TMUS Antennae Extruded'] });
    if (!features.length) {
        return;
    }
var Data = JSON.stringify(features);
var jsonData = JSON.parse(Data);

//parse the jsonData to get to what we'll need


var popup = new mapboxgl.Popup()
        .setLngLat(map.unproject(e.point))
        .setHTML('<svg width="200" height="200"></svg>')
        .addTo(map);

var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var parseTime = d3.timeParse("%d-%b-%y");

var x = d3.scaleTime()
    .rangeRound([0, width]);

var y = d3.scaleLinear()
    .rangeRound([height, 0]);

var line = d3.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

d3.tsv("data.tsv", function(d) {
  d.date = parseTime(d.date);
  d.close = +d.close;
  return d;
}, function(error, data) {
  if (error) throw error;

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.close; }));

  g.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x))
    .select(".domain")
      .remove();

  g.append("g")
      .call(d3.axisLeft(y))
    .append("text")
      .attr("fill", "#fff")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "0.71em")
      .attr("text-anchor", "end")
      .text("Metric");

  g.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "white")
      .attr("stroke-linejoin", "round")
      .attr("stroke-linecap", "round")
      .attr("stroke-width", 1.5)
      .attr("d", line);
});
});
}

</script>
</html>
