<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Manhattan LIDAR</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.js'></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.0/mapbox-gl-geocoder.min.js'></script>
    <script type="text/javascript" src="https://public.tableau.com/javascripts/api/tableau-2.js"></script>
    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.css' rel='stylesheet' />
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.0/mapbox-gl-geocoder.css' type='text/css' />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <script type="text/javascript" src="https://pubnub.github.io/eon/v/eon/1.0.0/eon.js"></script>
    <link type="text/css" rel="stylesheet" href="https://pubnub.github.io/eon/v/eon/1.0.0/eon.css"/>

<style>

body {
background-color:#000000;
}

.navbar-default {
background-color: #000000;
border-bottom: 0px;
border-top: 0px;
border-left: 0px;
border-right: 0px;
border-radius:0;
}

.hamburger {
float: left;
font-size: 30px;
cursor: pointer;
padding-left:5px;
padding-right:10px;
color: #4264fb;
}

.navbar-brand {
  padding: 0px;
}
.navbar-brand>img {
  height: 100%;
  padding: 15px;
  width: auto;
}

.sidemenu {
height: 100%;
width: 0;
position: fixed;
z-index: 1;
top: 0;
left: 0;
background-color: #000000;
overflow-x: hidden;
transition: 0.5s;
font-size:large;
color: #ffffff;
}

.sidemenu .closebtn {
position: absolute;
top: 0;
right: 25px;
font-size: 30px;
margin-left: 50px;
color: #4264fb;
}

#main {
transition: margin-left .5s;
height:1000%;
width:100%;
}

#map {
height: 90vh;
width: 100%;
margin: 0 auto;
}

.mapboxgl-popup-content {
    color: #4264fb;
    background-color: #000000;
    border-color: #4264fb;
    border-width: 1px;
    max-width: 250px;
    font-family: "Open Sans";
}

.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,
.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,
.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {
    border-bottom-color: #4264fb;
    }
.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,
.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,
.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {
    border-top-color: #4264fb;
    }
.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {
    border-right-color: #4264fb;
    }
.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {
    border-left-color: #4264fb;
    }

.mapboxgl-ctrl.mapboxgl-ctrl-attrib { 
    background-color:#000000; 
    border-top: : 1px solid #4264fb;
    border-left: : 1px solid #4264fb;
    border-right: : 1px solid #4264fb;
    border-bottom: : 0px solid #4264fb;
    border-radius: 15px 15px 0px 0px;
}

.mapboxgl-ctrl.mapboxgl-ctrl-attrib a {
font-family: "Open Sans";
color: #4264fb; 
}

p {
font-family: "Open Sans";
font-size: small !important; 
color: #4264fb !important;  
}

ul,li { 
list-style-type: none;
list-style-position:inside;
margin:0;
padding:0; 
}

.bannerhide {
height: 125px;
width: 95%;
overflow:hidden;
margin: 0 auto;
}

.tableau {
height: 150px;
width: 95%;
margin: 0 auto;
}

#HEIGHTFEET {
display:none;  
}

#HEIGHTMETERS {
display:none;  
}

#GROUNDFEET {
display:none;  
}

#GROUNDMETERS {
display:none;  
}

#YEAR {
display:none;  
}

#BLOCK {
display:none;  
}

.btn .btn-info {
backgroud-color: #4264fb !important;    
}

.a {
font-family: "Open Sans";
font-size: small !important; 
color: #ffffff !important;  
}

</style>
</head>
<body>

<div id="sidenav" class="sidemenu">
<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
<br><br>
<div id="Charts">
<p>5 Year Trends for Census Block: <p><p id="BLOCKINFO"></p>
<ul>
<li><div class='bannerhide'><div id='tableauViz1' class='tableau'><p>Total Population</p></div></div></li>
<li><div class='bannerhide'><div id='tableauViz2' class='tableau'><p>Males</p></div></div></li>
<li><div class='bannerhide'><div id='tableauViz3' class='tableau'><p>Females</p></div></div></li>
<li><div class='bannerhide'><div id='tableauViz4' class='tableau'><p>Income</p></div></div></li>
</ul>
<p>Data courtesy: </p><a href="https://www.census.gov/geo/maps-data/data/tiger-data.html">USGS American Community Survey</a>
</div>
<div id="HEIGHTFEET"></div>
<div id="HEIGHTMETERS"></div>
<div id="GROUNDFEET"></div>
<div id="GROUNDMETERS"></div>
<div id="YEAR"></div>
<div id="BLOCK"></div>
</div>
</div>

<div id="main">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
    <!--<span class="hamburger" onclick="openNav()">&#9776;</span>-->
    <a class="navbar-brand"><img src="mapbox-logo.png" alt="Mapbox"></a>
    </div>
  </div>
</nav>

<div id="chart" class="container-fluid">
<div id ="DashboardsTop" class="row">
<div class="col-lg-12">
<div id='map'></div>
</div>


</div>
</div>
</div>

</body>

<script>
var pubnub = new PubNub({
  publishKey: 'demo',
  subscribeKey: 'demo'
});
var map = eon.map({
  id: 'map',
  mbId: 'allanwalker.cjh6hab274vj62rohqy2616rt',
  mbToken: 'pk.eyJ1IjoiYWxsYW53YWxrZXIiLCJhIjoiY2phbHVlOHQ4MnZscDMycGJoaTdiaHRxOCJ9.OYLAoMVg6e3Ih4r65WJuvA',
  pubnub: pubnub,
  channels: ['sfo-flight-data'],
  rotate: true,
  history: true,
  marker: function (latlng, data) {

    var marker = new L.RotatedMarker(latlng, {
      icon: L.icon({
        iconUrl: '/wp-content/uploads/2016/05/airplane.png',
        iconSize: [24, 24]
      })
    });

    var popup = '';
    if(data[13]) {
      popup = 'Flight ' + data[13] + '';
    }
    if(data[11]) {
      if(!popup.length) {
        popup = 'Flight from ' + data[11];
      } else {
        popup += ' from ' + data[11];
      }
    }
    if(data[12]) {
      if(!popup.length) {
        popup = 'Flight to ' + data[12];
      } else {
        popup += ' to ' + data[12];
      }
    }
    if(!popup.length) {
      var popup = 'No data available';
    }

    marker.bindPopup(popup);

    return marker;
  }
});
</script>
</html>