<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Within Single Country</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet" />

<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0px; bottom: 0; width: 100%; }
.map-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: rgba(0, 0, 0, 0);
            margin-right: 20px;
            font-family: Arial, sans-serif;
            overflow: auto;
            border-radius: 3px;
            z-index: 1;
        }
#features {
            top: 0;
            margin-top: 20px;
        }
</style>
</head>

<body>
<div class="map-overlay" id="features"><select id="selector">
    <option selected disabled hidden>Select Country</option>
    <option value="US">US</option>
    <option value="FR">France</option>
    <option value="MX">Mexico</option>
</select>
</div>
<div id="map"></div>
</body>


<script>

mapboxgl.accessToken = 'pk.eyJ1IjoiYWxsYW53YWxrZXIiLCJhIjoiY2phbHVlOHQ4MnZscDMycGJoaTdiaHRxOCJ9.OYLAoMVg6e3Ih4r65WJuvA';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        zoom: 1.5,
        center: [0,0]
    });

map.on('style.load', function() {

//Replace with Boundaries

map.addSource('ne_countries', {
  type: 'geojson',
  data: 'https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_0_countries.geojson'
});

map.addLayer({
'id': 'countriespolygon',
'type': 'fill',
'source': 'ne_countries',
'layout': {},
'paint': {
'fill-color': 'white',
'fill-opacity': 0
}
});

//Replace 'iso_a2' with 'iso_3166_1'

$( "#selector" ).change(function() {
var val = (this.value);
var features = map.queryRenderedFeatures({
  layers: ['countriespolygon'],
  filter: ['==', 'iso_a2', val]
});
var selectedgeom = features[0].geometry;

if (map.getLayer('cookiecutter')){
map.removeLayer('cookiecutter');
map.removeSource('cookiecutter');
}

if (map.getLayer('streets')){
map.removeLayer('streets');
map.removeSource('streets');
}

if (map.getLayer('ne_populatedplaces')){
map.removeLayer('ne_populatedplaces');
map.removeSource('ne_populatedplaces');
}

map.addSource('cookiecutter', {
  type: 'geojson',
  data: selectedgeom
});

map.addLayer({
'id': 'cookiecutter',
'type': 'fill',
'source': 'cookiecutter',
'layout': {},
'paint': {
'fill-color': 'blue',
'fill-opacity': 0.25
}
});

map.addSource('streets', {
  type: 'vector',
  url: 'mapbox://mapbox.mapbox-streets-v8'
});

map.addLayer({
'id': 'streets',
'type': 'line',
'source': 'streets',
'source-layer': 'road',
'layout': {},
'paint': {
'line-color': ['case', ['within', selectedgeom], 'blue', 'red'],
'line-width' : 1,
'line-opacity': 0.75
}
});

map.addSource('ne_populatedplaces', {
  type: 'geojson',
  data: 'https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_populated_places.geojson'
});

map.addLayer({
'id': 'ne_populatedplaces',
'type': 'circle',
'source': 'ne_populatedplaces',
'layout': {},
'paint': {
'circle-color': ['case', ['within', selectedgeom], 'blue', 'red'],
'circle-opacity' : 0.75,
'circle-radius': 
[
  "interpolate",
  ["linear"],
  ["get", "RANK_MAX"],
  0,
  0,
  14,
  5
]
},
});
});
});



</script>


</html>