<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Lyft POC">
<meta name="author" content="Allan Walker, Evan Roberts">
<title>Lyft POC</title>

<!-- CSS -->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.min.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="shortcut icon" href="http://slalom.rocks.s3.amazonaws.com/data_viz/favicon.ico" type="image/x-icon">
<link rel="icon" href="http://slalom.rocks.s3.amazonaws.com/data_viz/favicon.ico" type="image/x-icon">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

<!-- Script Libraries -->

<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script type="text/javascript" src="https://public.tableau.com/javascripts/api/tableau-2.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.min.js"></script>
<script src="https://use.fontawesome.com/c00fec99fb.js"></script>

<style>

body {
background-color: #F3F3F5 !important;
}

.navbar {
border-radius: 0px;
border-color: #333347 !important;
}

input {
font:small-caption;
font-family: 'Montserrat', sans-serif;
border-color: #333347 !important;
}

.navbar-brand {
  padding: 10px; /* firefox bug fix */
}
.navbar-brand>img {
   max-height: 100%;
   height: 100%;
   width: auto;
   margin: 0 auto;

   -o-object-fit: contain;
   object-fit: contain; 

}

#nav {
background-color: #333347 !important;
}

#Navbar {
background-color: #333347 !important;
border-radius: 0px !important;
border-color: #333347 !important;
}

.navbar-nav li a {
    line-height: 50px;
    height: 50px;
    padding-top: 0;
}

.dropdown {
background-color: #FF00BF !important;
font-family: 'Montserrat', sans-serif;
color: #F3F3F5 !important;
border-radius: 10px;
}

.dropdown-menu {
background-color: #FF00BF !important;
font-family: 'Montserrat', sans-serif;
color: #F3F3F5 !important;
}

.dropdown-toggle {
background-color: #FF00BF !important;
font-family: 'Montserrat', sans-serif;
color: #F3F3F5 !important;
}

/* unvisited link */
a:link {
color: #F3F3F5;
text-decoration: none;
}

/* visited link */
a:visited {
color: #F3F3F5;
text-decoration: none;
}

/* mouse over link */
a:hover {
color: #F3F3F5;
text-decoration: none;
}

/* selected link */
a:active {
color: #F3F3F5;
text-decoration: none;
}

.bannerhide {
height: 180px;
overflow:hidden;
}

.bannerhideBAN {
height: 180px;
overflow:hidden;
}

.bannerhideDONUT {
height: 180px;
overflow:hidden;
}

.bannerhideTREND {
height: 300px;
overflow:hidden;
}

.bannerhideMAP {
height: 480px;
overflow:hidden;
}


.tableauViz {
width: 90%;
height: 250px;
margin: 0 auto;
}

.tableauVizBAN {
width: 90%;
height: 250px;
margin: 0 auto;
}

.tableauVizDONUT {
width: 90%;
height: 250px;
margin: 0 auto;
}

.tableauVizTREND {
width: 90%;
height: 370px;
margin: 0 auto;
}

.tableauVizMAP {
width: 90%;
height: 550px;
margin: 0 auto;
}

#title {
color:#FF00BF;
font-family: 'Montserrat', sans-serif;
}

.box {
width: 80%;
color: #000000 !important;
margin: 0 auto;
}

p {
color: #333347 !important;
font-family: 'Montserrat', sans-serif;
}

#e {
  transform: rotate(45deg);
  margin-top: 35.5%;
  margin-left: 35.5%;
  height: 0px;
}

#aa {
  width: 120px;
  height: 120px;
  border-radius: 100%;
  border-right: 5px solid transparent;
  border-left: 5px solid #333347;
  border-bottom: 5px solid transparent;
  border-top: 5px solid #333347;
  margin-top: -140px;
  margin-left: 55px;
  animation-name: aa;
  animation-duration: 1.5s;
  animation-iteration-count: infinite;
  animation-timing-function: linearinout;
}
@keyframes aa {
  0% {
    transform: rotate(360deg);
  }
}
#bb {
  width: 140px;
  height: 140px;
  border-radius: 100%;
  border-right: 5px solid transparent;
  border-left: 5px solid #352384;
  border-bottom: 5px solid transparent;
  border-top: 5px solid #352384;
  margin-left: 45px;
  animation-name: bb;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  margin-top: -160px;
}
@keyframes bb {
  0% {
    transform: rotate(360deg);
  }
}
#cc {
  width: 160px;
  height: 160px;
  border-radius: 100%;
  border-right: 5px solid transparent;
  border-left: 5px solid #FF00BF;
  border-bottom: 5px solid transparent;
  border-top: 5px solid #FF00BF;
  margin-left: 35px;
  animation-name: cc;
  animation-duration: 3s;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}
@keyframes cc {
  0% {
    transform: rotate(360deg);
  }
}

#load {
  position:absolute;
  width:600px;
  height:36px;
  left:50%;
  top:25%;
  margin-left:-300px;
  overflow:visible;
  -webkit-user-select:none;
  -moz-user-select:none;
  -ms-user-select:none;
  user-select:none;
  cursor:default;
color: #FF00BF !important;
font-family: 'Montserrat', sans-serif;
}

ul#list {
padding-left: 0;
-webkit-padding-start: 0;
list-style-type: none;
}


li#donut {
display: inline-block;
}
</style>
</head>

<body onload="tableau1()">
<nav id="Top" class="navbar navbar-default">
<div id="nav" class="container-fluid">
    <div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#Navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" rel="home" href="https://www.lyft.com/" title="Lyft"><img style="" src="images/logo_standard_silver.png"></a>
    </div>
<div class="collapse navbar-collapse" id="Navbar">
<ul class="nav navbar-nav navbar-right">
 <li id="cdrop" class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">Metric
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
<div id="filtersc" class="button-group">
          <li><a href="javascript:void(0)" onclick="showall()">&nbsp;All Metrics</a></li>
          <li><a href="javascript:void(0)" onclick="conversion()">&nbsp;Conversion</a></li>
<li><a href="javascript:void(0)" onclick="rides()">&nbsp;Rides</a></li>
<li><a href="javascript:void(0)" onclick="utilization()">&nbsp;Utilization</a></li>
<li><a href="javascript:void(0)" onclick="primetime()">&nbsp;Prime time</a></li>
<li><a href="javascript:void(0)" onclick="driverhours()">&nbsp;Driver hours</a></li>
<li><a href="javascript:void(0)" onclick="marketshare()">&nbsp;Market share</a></li>
</div>
        </ul>
      </li>
      </ul>
     </div>
    </div>
</nav>

<div id="e">
<div id="cc"></div>
<div id="bb"></div>
<div id="aa"></div>
</div>

<div id="load"><h4>Loading...</h4></div>

<div class="container-fluid">

<div id="title" class="row">
<div class="col-md-12">
<h1>Lyft POC</h1>
</div>
</div>

<div id="controls" class="row">
<div class="col-md-3">
<p>Date from:&nbsp;</p>
<input type="text" id="datepickerfrom" class="box" value="01/01/2015">
</div>
<div class="col-md-3">
<p>Date to:&nbsp;</p>
<input type="text" id="datepickerto" class="box" value="12/31/2015">
</div>
<div class="col-md-3">
</div>
</div>

<div id="conversion" class="row">
<h2>&nbsp;Conversion</h2>
<div class="col-md-6">
<ul id="list">
<li id="donut"><div class="bannerhideDONUT"><div id="tableauViz2" class="tableauVizDONUT"></div></div></li>
<li id="donut"><div class="bannerhideBAN"><div id="tableauViz1" class="tableauVizBAN"></div></div></li>
<li><div class="bannerhideTREND"><div id="tableauViz3" class="tableauVizTREND"></div></div></li>
</ul>
</div>
<div class="col-md-6">
<ul id="list">
<li><div class="bannerhideMAP"><div id="tableauViz4" class="tableauVizMAP"></div></div></li>
</ul>
</div>
</div>

<div id="rides" class="row">
<h2>&nbsp;Rides</h2>
</div>

<div id="utilization" class="row">
<h2>&nbsp;Utilization</h2>
</div>

<div id="primetime" class="row">
<h2>&nbsp;Prime time</h2>
</div>

<div id="driverhours" class="row">
<h2>&nbsp;Driver hours</h2>
</div>

<div id="marketshare" class="row">
<h2>&nbsp;Market share</h2>
</div>

</div>



</div>
</body>

<script>
$('#Top').hide();
$('#cdrop').hide();
$('#controls').hide();
$('#filtersc').hide();
$('#conversion').hide();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').hide();


var a = function tableau1(){
     a = function tableau1(){};
};

var b = function tableau2(){
     b = function tableau2(){};
};

var c = function tableau3(){
     c = function tableau3(){};
};

var d = function tableau4(){
     d = function tableau4(){};
};

var onePh = document.getElementById("tableauViz1");
var twoPh = document.getElementById("tableauViz2");
var threePh = document.getElementById("tableauViz3");
var fourPh = document.getElementById("tableauViz4");

// Setting up the URLs

var oneUrl = "https://public.tableau.com/views/TAXIPOC/CONVERSIONBAN?:showVizHome=no&:display_spinner=yes&:jsdebug=n&:embed=y&:display_overlay=yes&:display_static_image=no&:animate_transition=yes";
var twoUrl = "https://public.tableau.com/views/TAXIPOC/CONVERSIONDONUT?:showVizHome=no&:display_spinner=yes&:jsdebug=n&:embed=y&:display_overlay=yes&:display_static_image=no&:animate_transition=yes";
var threeUrl = "https://public.tableau.com/views/TAXIPOC/CONVERSIONTREND?:showVizHome=no&:display_spinner=yes&:jsdebug=n&:embed=y&:display_overlay=yes&:display_static_image=no&:animate_transition=yes";
var fourUrl = "https://public.tableau.com/views/TAXIPOC/CONVERSIONMAP?:showVizHome=no&:display_spinner=yes&:jsdebug=n&:embed=y&:display_overlay=yes&:display_static_image=no&:animate_transition=yes";

function tableau1(){
	var onevizOptions = {
	width: "100%",
	height: "100%",
            hideTabs: false,
            onFirstInteractive: function() {
tableau2();
}
        };
viz1 = new tableauSoftware.Viz(onePh, oneUrl, onevizOptions);
}

function tableau2(){

	var twovizOptions = {
	width: "100%",
	height: "100%",
            hideTabs: false,
            onFirstInteractive: function() {
tableau3();
}
        };
viz2 = new tableauSoftware.Viz(twoPh, twoUrl, twovizOptions);
}

function tableau3(){
	var threevizOptions = {
	width: "100%",
	height: "100%",
            hideTabs: false,
            onFirstInteractive: function() {
tableau4();

}
        };
viz3 = new tableauSoftware.Viz(threePh, threeUrl, threevizOptions);
}

function tableau4(){
	var fourvizOptions = {
	width: "100%",
	height: "100%",
            hideTabs: false,
            onFirstInteractive: function() {
showstart();

}
        };
viz4 = new tableauSoftware.Viz(fourPh, fourUrl, fourvizOptions);
}



function showstart(){
$('#e').hide();
$('#cc').hide();
$('#bb').hide();
$('#aa').hide();
$('#load').hide();
$('#title').hide();
$('#Top').show();
$('#cdrop').show();
$('#filtersc').show();
$('#controls').show();
$('#conversion').show();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').hide();
}

// Datepickers

  $(function() {
    $( "#datepickerfrom" ).datepicker({
defaultDate: new Date(2015,1,1),
minDate: '01/01/2015',
maxDate: '12/31/2017',
      changeMonth: true,
      numberOfMonths: 1,
      onClose: function( selectedDate ) {
        $( "#datepickerto" ).datepicker( "option", "minDate", selectedDate );
      }
    });
    $( "#datepickerto" ).datepicker({
defaultDate: new Date(2015,12,31),
minDate: '01/01/2015',
maxDate: '12/31/2015',
      changeMonth: true,
      numberOfMonths: 1,
      onClose: function( selectedDate ) {
        $( "#datepickerfrom" ).datepicker( "option", "maxDate", selectedDate );
      }
    });
  });

$( "#datepickerfrom" ).change(function() {
  from(this.value);
});


function from(propValue){
viz1.getWorkbook().changeParameterValueAsync("FROMDATE", propValue);
viz2.getWorkbook().changeParameterValueAsync("FROMDATE", propValue);
viz3.getWorkbook().changeParameterValueAsync("FROMDATE", propValue);
viz4.getWorkbook().changeParameterValueAsync("FROMDATE", propValue);
  };

$( "#datepickerto" ).change(function() {
  to(this.value);

});


function to(propValue){
viz1.getWorkbook().changeParameterValueAsync("TODATE", propValue);
viz2.getWorkbook().changeParameterValueAsync("TODATE", propValue);
viz3.getWorkbook().changeParameterValueAsync("TODATE", propValue);
viz4.getWorkbook().changeParameterValueAsync("TODATE", propValue);
  };

function showall(){
$('#conversion').show();
$('#rides').show();
$('#utilization').show();
$('#primetime').show();
$('#driverhours').show();
$('#marketshare').show();
}

function conversion(){
$('#conversion').show();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').hide();
}

function rides(){
$('#conversion').hide();
$('#rides').show();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').hide();
}

function utilization(){
$('#conversion').hide();
$('#rides').hide();
$('#utilization').show();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').hide();
}

function primetime(){
$('#conversion').hide();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').show();
$('#driverhours').hide();
$('#marketshare').hide();
}

function driverhours(){
$('#conversion').hide();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').show();
$('#marketshare').hide();
}

function marketshare(){
$('#conversion').hide();
$('#rides').hide();
$('#utilization').hide();
$('#primetime').hide();
$('#driverhours').hide();
$('#marketshare').show();
}

</script>
</html>